commit 9513dc81121b89f0db83ac6b8100a6188b0f360a
Author: tina.tian <tina.tian@liferay.com>
Date:   Mon Jan 13 11:17:02 2020 -0800

    LPS-57105 Revert "LPS-57105 Improve", revert to simplify the logic so that can avoid recursive calls and unnecessary regex matching, when the inner recursive call returns "true", the outer Matcher.match will still be executed.

diff --git a/portal-impl/src/com/liferay/portal/util/PortalImpl.java b/portal-impl/src/com/liferay/portal/util/PortalImpl.java
index 814e745c00c4..3fec20addd8a 100644
--- a/portal-impl/src/com/liferay/portal/util/PortalImpl.java
+++ b/portal-impl/src/com/liferay/portal/util/PortalImpl.java
@@ -6408,10 +6408,8 @@ public class PortalImpl implements Portal {
 			return true;
 		}
 
-		if (resourceId.contains("%") &&
-			!isValidResourceId(HttpUtil.decodePath(resourceId))) {
-
-			return false;
+		if (resourceId.contains("%")) {
+			resourceId = HttpUtil.decodePath(resourceId);
 		}
 
 		Matcher matcher = _bannedResourceIdPattern.matcher(resourceId);