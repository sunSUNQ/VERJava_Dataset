commit 6c8e3fa38bc6edcbb187ee6c3aecd97d138c8d7e
Author: Leon Chi <leon.chi@liferay.com>
Date:   Mon Dec 16 10:49:37 2019 +0800

    LPS-57105 URL decode when needed

diff --git a/portal-impl/src/com/liferay/portal/util/PortalImpl.java b/portal-impl/src/com/liferay/portal/util/PortalImpl.java
index 620704a677d0..2935b119b405 100644
--- a/portal-impl/src/com/liferay/portal/util/PortalImpl.java
+++ b/portal-impl/src/com/liferay/portal/util/PortalImpl.java
@@ -6408,6 +6408,10 @@ public class PortalImpl implements Portal {
 			return true;
 		}
 
+		if (resourceId.contains("%")) {
+			resourceId = HttpUtil.decodePath(resourceId);
+		}
+
 		Matcher matcher = _bannedResourceIdPattern.matcher(resourceId);
 
 		if (matcher.matches()) {