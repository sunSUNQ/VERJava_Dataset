commit 22395c3cbd9a5845a65ce9632628bc4668405519
Author: Tomáš Polešovský <tomas.polesovsky@liferay.com>
Date:   Tue Jun 9 17:44:39 2020 +0200

    LPS-113348 Preflight requests do not have Bearer token, we must let them through

diff --git a/modules/apps/portal-remote/portal-remote-cors-impl/src/main/java/com/liferay/portal/remote/cors/internal/servlet/filter/CORSServletFilter.java b/modules/apps/portal-remote/portal-remote-cors-impl/src/main/java/com/liferay/portal/remote/cors/internal/servlet/filter/CORSServletFilter.java
index 6b6bb51bd056..2feb8000b8b3 100644
--- a/modules/apps/portal-remote/portal-remote-cors-impl/src/main/java/com/liferay/portal/remote/cors/internal/servlet/filter/CORSServletFilter.java
+++ b/modules/apps/portal-remote/portal-remote-cors-impl/src/main/java/com/liferay/portal/remote/cors/internal/servlet/filter/CORSServletFilter.java
@@ -39,10 +39,7 @@ public class CORSServletFilter extends BaseFilter {
 		HttpServletRequest httpServletRequest,
 		HttpServletResponse httpServletResponse) {
 
-		if (OAuth2ProviderScopeLiferayAccessControlContext.
-				isOAuth2AuthVerified() &&
-			corsSupport.isCORSRequest(httpServletRequest::getHeader)) {
-
+		if (corsSupport.isCORSRequest(httpServletRequest::getHeader)) {
 			return true;
 		}
 
@@ -68,7 +65,9 @@ public class CORSServletFilter extends BaseFilter {
 			return;
 		}
 
-		if (corsSupport.isValidCORSRequest(
+		if (OAuth2ProviderScopeLiferayAccessControlContext.
+				isOAuth2AuthVerified() &&
+			corsSupport.isValidCORSRequest(
 				httpServletRequest.getMethod(),
 				httpServletRequest::getHeader)) {
 