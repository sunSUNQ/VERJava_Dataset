commit 79859a3bdc8970a31e8f5cd7ab4a5a548c614220
Author: Carlos Sierra Andr√©s <carlos.sierra@liferay.com>
Date:   Fri Mar 13 15:53:31 2020 +0100

    LPS-57105 SF Move check up
    
    to avoid unnecessary work

diff --git a/portal-impl/src/com/liferay/portal/util/PortalImpl.java b/portal-impl/src/com/liferay/portal/util/PortalImpl.java
index 5e7682ce8a49..782af4d0a372 100644
--- a/portal-impl/src/com/liferay/portal/util/PortalImpl.java
+++ b/portal-impl/src/com/liferay/portal/util/PortalImpl.java
@@ -6453,13 +6453,13 @@ public class PortalImpl implements Portal {
 		while ((count > 0) && resourceId.contains("%")) {
 			resourceId = HttpUtil.decodePath(resourceId);
 
-			matcher = _bannedResourceIdPattern.matcher(resourceId);
-
-			if (matcher.matches()) {
+			if (Validator.isNull(resourceId)) {
 				return false;
 			}
 
-			if (Validator.isNull(resourceId)) {
+			matcher = _bannedResourceIdPattern.matcher(resourceId);
+
+			if (matcher.matches()) {
 				return false;
 			}
 