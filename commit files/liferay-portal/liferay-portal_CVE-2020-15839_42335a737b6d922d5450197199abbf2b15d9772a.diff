commit 42335a737b6d922d5450197199abbf2b15d9772a
Author: Javier Gamarra <nhpatt@gmail.com>
Date:   Mon May 18 14:24:01 2020 +0200

    LPS-113779 restrict filter to exclude /o endpoints

diff --git a/portal-impl/src/com/liferay/portal/servlet/filters/uploadservletrequest/UploadServletRequestFilter.java b/portal-impl/src/com/liferay/portal/servlet/filters/uploadservletrequest/UploadServletRequestFilter.java
index 9c240039c39f..5eeb7e37b9b7 100644
--- a/portal-impl/src/com/liferay/portal/servlet/filters/uploadservletrequest/UploadServletRequestFilter.java
+++ b/portal-impl/src/com/liferay/portal/servlet/filters/uploadservletrequest/UploadServletRequestFilter.java
@@ -23,6 +23,7 @@ import com.liferay.portal.kernel.servlet.HttpHeaders;
 import com.liferay.portal.kernel.upload.UploadServletRequest;
 import com.liferay.portal.kernel.util.ContentTypes;
 import com.liferay.portal.kernel.util.ParamUtil;
+import com.liferay.portal.kernel.util.Portal;
 import com.liferay.portal.kernel.util.PortalUtil;
 import com.liferay.portal.kernel.util.Validator;
 import com.liferay.portal.kernel.util.WebKeys;
@@ -47,10 +48,13 @@ public class UploadServletRequestFilter extends BasePortalFilter {
 		HttpServletRequest httpServletRequest,
 		HttpServletResponse httpServletResponse) {
 
+		String servletPath = httpServletRequest.getServletPath();
+
 		String contentType = httpServletRequest.getHeader(
 			HttpHeaders.CONTENT_TYPE);
 
-		if ((contentType != null) &&
+		if (!servletPath.startsWith(Portal.PATH_MODULE) &&
+			(contentType != null) &&
 			contentType.startsWith(ContentTypes.MULTIPART_FORM_DATA)) {
 
 			return true;