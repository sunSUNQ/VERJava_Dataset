commit c172c23a43e5612d2806be428e375dd29d20c68f
Author: Pavel Savinov <pavel.savinov@liferay.com>
Date:   Wed Jul 29 08:10:02 2020 +0200

    LPS-117983 Escape structure name to avoid XSS

diff --git a/modules/apps/journal/journal-web/src/main/java/com/liferay/journal/web/internal/display/context/JournalManagementToolbarDisplayContext.java b/modules/apps/journal/journal-web/src/main/java/com/liferay/journal/web/internal/display/context/JournalManagementToolbarDisplayContext.java
index f02b939c20ae..e36a2780f33b 100644
--- a/modules/apps/journal/journal-web/src/main/java/com/liferay/journal/web/internal/display/context/JournalManagementToolbarDisplayContext.java
+++ b/modules/apps/journal/journal-web/src/main/java/com/liferay/journal/web/internal/display/context/JournalManagementToolbarDisplayContext.java
@@ -44,6 +44,7 @@ import com.liferay.portal.kernel.service.WorkflowDefinitionLinkLocalServiceUtil;
 import com.liferay.portal.kernel.theme.ThemeDisplay;
 import com.liferay.portal.kernel.util.ArrayUtil;
 import com.liferay.portal.kernel.util.HashMapBuilder;
+import com.liferay.portal.kernel.util.HtmlUtil;
 import com.liferay.portal.kernel.util.ParamUtil;
 import com.liferay.portal.kernel.util.PortalUtil;
 import com.liferay.portal.kernel.util.WebKeys;
@@ -544,10 +545,11 @@ public class JournalManagementToolbarDisplayContext
 							dropdownItem -> {
 								dropdownItem.setHref(portletURL);
 								dropdownItem.setLabel(
-									ddmStructure.getUnambiguousName(
-										ddmStructures,
-										_themeDisplay.getScopeGroupId(),
-										_themeDisplay.getLocale()));
+									HtmlUtil.escape(
+										ddmStructure.getUnambiguousName(
+											ddmStructures,
+											_themeDisplay.getScopeGroupId(),
+											_themeDisplay.getLocale())));
 							};
 
 						if (ArrayUtil.contains(
diff --git a/modules/apps/journal/journal-web/src/main/resources/META-INF/resources/select_ddm_structure.jsp b/modules/apps/journal/journal-web/src/main/resources/META-INF/resources/select_ddm_structure.jsp
index 35f35f530fdb..bf5558a0bfa8 100644
--- a/modules/apps/journal/journal-web/src/main/resources/META-INF/resources/select_ddm_structure.jsp
+++ b/modules/apps/journal/journal-web/src/main/resources/META-INF/resources/select_ddm_structure.jsp
@@ -53,7 +53,7 @@ SearchContainer<DDMStructure> ddmStructureSearch = journalSelectDDMStructureDisp
 						).put(
 							"ddmstructurekey", ddmStructure.getStructureKey()
 						).put(
-							"name", ddmStructure.getName(locale)
+							"name", HtmlUtil.escape(ddmStructure.getName(locale))
 						).build();
 						%>
 