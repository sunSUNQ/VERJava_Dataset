commit 6f5d1c76765f6b54f75c7494447123b16705c875
Author: Renato Rego <renato.rego@liferay.com>
Date:   Tue Jun 2 15:24:48 2020 -0300

    LPS-113264 Add test to cover searches performed by site members.

diff --git a/modules/apps/dynamic-data-mapping/dynamic-data-mapping-test/src/testIntegration/java/com/liferay/dynamic/data/mapping/search/test/DDMFormInstanceRecordSearchTest.java b/modules/apps/dynamic-data-mapping/dynamic-data-mapping-test/src/testIntegration/java/com/liferay/dynamic/data/mapping/search/test/DDMFormInstanceRecordSearchTest.java
index da667fe2b9ee..832b1106282e 100644
--- a/modules/apps/dynamic-data-mapping/dynamic-data-mapping-test/src/testIntegration/java/com/liferay/dynamic/data/mapping/search/test/DDMFormInstanceRecordSearchTest.java
+++ b/modules/apps/dynamic-data-mapping/dynamic-data-mapping-test/src/testIntegration/java/com/liferay/dynamic/data/mapping/search/test/DDMFormInstanceRecordSearchTest.java
@@ -33,6 +33,7 @@ import com.liferay.dynamic.data.mapping.test.util.DDMFormValuesTestUtil;
 import com.liferay.dynamic.data.mapping.test.util.DDMStructureTestHelper;
 import com.liferay.portal.kernel.model.Group;
 import com.liferay.portal.kernel.model.User;
+import com.liferay.portal.kernel.model.role.RoleConstants;
 import com.liferay.portal.kernel.search.BaseModelSearchResult;
 import com.liferay.portal.kernel.search.SearchContext;
 import com.liferay.portal.kernel.security.auth.CompanyThreadLocal;
@@ -98,6 +99,20 @@ public class DDMFormInstanceRecordSearchTest {
 		_searchContext = getSearchContext(_group, _user, ddmFormInstance);
 	}
 
+	@Test
+	public void testBasicSearchWithGroupUser() throws Exception {
+		User user = UserTestUtil.addGroupUser(
+			_group, RoleConstants.SITE_MEMBER);
+
+		addDDMFormInstanceRecord("Joe Bloggs", "Simple description");
+
+		_searchContext.setKeywords("Simple description");
+
+		_searchContext.setUserId(user.getUserId());
+
+		assertSearch("description", 1);
+	}
+
 	@Test
 	public void testBasicSearchWithGuestUser() throws Exception {
 		User user = UserTestUtil.addUser();