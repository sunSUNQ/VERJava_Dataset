commit 40c10ff6eb7eb763485b57990f476ff4e6f7e5e3
Author: Kohsuke Kawaguchi <kk@kohsuke.org>
Date:   Mon Jun 11 17:31:07 2012 -0700

    Fixed a regression in 1.468 that broke LDAP
    
    Stack trace:
    
    org.jvnet.hudson.reactor.ReactorException: java.lang.IllegalAccessError: tried to access method hudson.security.SecurityRealm.findBean(Ljava/lang/Class;Lorg/springframework/context/ApplicationContext;)Ljava/lang/Object; from class hudson.security.LDAPSecurityRealm$LDAPUserDetailsService
      at org.jvnet.hudson.reactor.Reactor.execute(Reactor.java:246)
      at jenkins.InitReactorRunner.run(InitReactorRunner.java:43)
      at jenkins.model.Jenkins.executeReactor(Jenkins.java:885)
      at jenkins.model.Jenkins.<init>(Jenkins.java:790)
      at hudson.model.Hudson.<init>(Hudson.java:81)
      at hudson.model.Hudson.<init>(Hudson.java:77)
      at hudson.WebAppMain$2.run(WebAppMain.java:217)
    Caused by: java.lang.IllegalAccessError: tried to access method hudson.security.SecurityRealm.findBean(Ljava/lang/Class;Lorg/springframework/context/ApplicationContext;)Ljava/lang/Object; from class hudson.security.LDAPSecurityRealm$LDAPUserDetailsService
      at hudson.security.LDAPSecurityRealm$LDAPUserDetailsService.<init>(LDAPSecurityRealm.java:419)
      at hudson.security.LDAPSecurityRealm.createSecurityComponents(LDAPSecurityRealm.java:369)
      at hudson.security.SecurityRealm.getSecurityComponents(SecurityRealm.java:398)
      at hudson.security.HudsonFilter.reset(HudsonFilter.java:134)
      at jenkins.model.Jenkins.setSecurityRealm(Jenkins.java:1960)
      at jenkins.model.Jenkins$17.run(Jenkins.java:2524)
      at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:146)
      at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:259)
      at jenkins.model.Jenkins$7.runTask(Jenkins.java:874)
      at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:187)
      at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:94)
      at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
      at java.lang.Thread.run(Thread.java:680)

diff --git a/changelog.html b/changelog.html
index 08419051bc..7a11e4f64d 100644
--- a/changelog.html
+++ b/changelog.html
@@ -55,7 +55,8 @@ Upcoming changes</a>
 <!-- Record your changes in the trunk here. -->
 <div id="trunk" style="display:none"><!--=TRUNK-BEGIN=-->
 <ul class=image>
-  <li class=>
+  <li class=bug>
+    Fixed a regression in 1.468 that broke LDAP
 </ul>
 </div><!--=TRUNK-END=-->
 
diff --git a/core/src/main/java/hudson/security/SecurityRealm.java b/core/src/main/java/hudson/security/SecurityRealm.java
index 1bb1ce40ea..9721fd252e 100644
--- a/core/src/main/java/hudson/security/SecurityRealm.java
+++ b/core/src/main/java/hudson/security/SecurityRealm.java
@@ -372,7 +372,7 @@ public abstract class SecurityRealm extends AbstractDescribableImpl<SecurityReal
      * This method is intended to be used to pick up a Acegi object from
      * spring once the bean definition file is parsed.
      */
-    protected static <T> T findBean(Class<T> type, ApplicationContext context) {
+    public static <T> T findBean(Class<T> type, ApplicationContext context) {
         Map m = context.getBeansOfType(type);
         switch(m.size()) {
         case 0: